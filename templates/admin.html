{% extends "base.html" %}

{% block content %}

<h2>Административная панель</h2>

<!-- ===================== -->
<!-- ДОБАВЛЕНИЕ СТАТЬИ -->
<!-- ===================== -->

<div class="card">
    <h3>Добавить статью</h3>

    <form method="post">
        <input type="text" name="article_title" placeholder="Заголовок" required>
        <input type="text" name="category" placeholder="Категория (about / production)" required>
        <textarea name="article_content" placeholder="Текст статьи" required></textarea>
        <input type="submit" value="Добавить статью">
    </form>
</div>

<!-- ===================== -->
<!-- ДОБАВЛЕНИЕ НОВОСТИ -->
<!-- ===================== -->

<div class="card">
    <h3>Добавить новость</h3>

    <form method="post">
        <input type="text" name="news_title" placeholder="Заголовок" required>
        <textarea name="news_content" placeholder="Текст новости" required></textarea>
        <input type="submit" value="Добавить новость">
    </form>
</div>

<!-- ===================== -->
<!-- ПОЛЬЗОВАТЕЛИ -->
<!-- ===================== -->

<div class="card">
    <h3>Пользователи сайта</h3>

    <table border="1" cellpadding="5">
        <tr>
            <th>Логин</th>
            <th>Роль</th>
            <th>Действия</th>
        </tr>

        {% for u in users %}
        <tr>
            <td>{{ u.username }}</td>
            <td>{{ u.role }}</td>
            <td>
                {% if u.username != "admin" %}
                <a href="{{ url_for('admin_bp.delete_user', user_id=u.id) }}">
                    Удалить
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

<!-- ===================== -->
<!-- СОЗДАНИЕ ПОЛЬЗОВАТЕЛЯ -->
<!-- ===================== -->

<div class="card">
    <h3>Создать пользователя</h3>

    <form method="post" action="{{ url_for('admin_bp.create_user') }}">
        <input type="text" name="username" placeholder="Логин" required>
        <input type="password" name="password" placeholder="Пароль" required>
        <select name="role">
            <option value="user">Пользователь</option>
            <option value="admin">Администратор</option>
        </select>
        <input type="submit" value="Создать пользователя">
    </form>
</div>

{% endblock %}
