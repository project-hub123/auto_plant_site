{% extends "base.html" %}

{% block content %}

<h2>Административная панель</h2>

<p>
Административная панель предназначена для управления контентом сайта
автомобильного завода, а также для контроля учётных записей пользователей.
Доступ к данному разделу имеют только пользователи с ролью администратора.
</p>

<!-- ===============================
     ДОБАВЛЕНИЕ СТАТЕЙ
================================ -->

<div class="admin-panel">
    <h3>Добавление статьи</h3>

    <p>
        В данном разделе администратор может добавить новую статью
        в один из основных разделов сайта.
    </p>

    <form method="post" action="{{ url_for('admin') }}">
        <label for="article_title">Заголовок статьи</label>
        <input
            type="text"
            id="article_title"
            name="article_title"
            required
        >

        <label for="category">Раздел</label>
        <input
            type="text"
            id="category"
            name="category"
            placeholder="about или production"
            required
        >

        <label for="article_content">Текст статьи</label>
        <textarea
            id="article_content"
            name="article_content"
            required
        ></textarea>

        <input type="submit" value="Добавить статью">
    </form>
</div>

<!-- ===============================
     ДОБАВЛЕНИЕ НОВОСТЕЙ
================================ -->

<div class="admin-panel">
    <h3>Добавление новости</h3>

    <p>
        Раздел позволяет публиковать новости о деятельности завода,
        обновлениях производства и других значимых событиях.
    </p>

    <form method="post" action="{{ url_for('admin') }}">
        <label for="news_title">Заголовок новости</label>
        <input
            type="text"
            id="news_title"
            name="news_title"
            required
        >

        <label for="news_content">Текст новости</label>
        <textarea
            id="news_content"
            name="news_content"
            required
        ></textarea>

        <input type="submit" value="Добавить новость">
    </form>
</div>

<!-- ===============================
     СПИСОК СТАТЕЙ
================================ -->

<div class="admin-panel">
    <h3>Список статей</h3>

    {% if articles %}
        {% for article in articles %}
            <p>
                {{ article.title }}  
                (раздел: {{ article.category }})
            </p>
        {% endfor %}
    {% else %}
        <p>Статьи отсутствуют.</p>
    {% endif %}
</div>

<!-- ===============================
     СПИСОК НОВОСТЕЙ
================================ -->

<div class="admin-panel">
    <h3>Список новостей</h3>

    {% if news %}
        {% for item in news %}
            <p>
                {{ item.title }}
            </p>
        {% endfor %}
    {% else %}
        <p>Новости отсутствуют.</p>
    {% endif %}
</div>

<!-- ===============================
     ПОЛЬЗОВАТЕЛИ
================================ -->

<div class="admin-panel">
    <h3>Пользователи сайта</h3>

    {% if users %}
        {% for user in users %}
            <p>
                Логин: {{ user.username }} |
                Роль: {{ user.role }}
            </p>
        {% endfor %}
    {% else %}
        <p>Пользователи отсутствуют.</p>
    {% endif %}
</div>

{% endblock %}
